<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: A direct interface to the 'computational engine' of...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for coxsurv.fit {survival}"><tr><td>coxsurv.fit {survival}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
A direct interface to the &lsquo;computational engine&rsquo; of survfit.coxph
</h2>

<h3>Description</h3>

<p>This program is mainly supplied to allow other packages to invoke the
survfit.coxph function at a &lsquo;data&rsquo; level rather than a &lsquo;user&rsquo; level.
It does no checks on the input data that is provided, which can lead
to unexpected errors if that data is wrong.
</p>


<h3>Usage</h3>

<pre>
coxsurv.fit(ctype, stype, se.fit, varmat, cluster, 
            y, x, wt, risk, position, strata, oldid,
            y2, x2, risk2, strata2, id2, unlist=TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>stype</code></td>
<td>
<p>survival curve computation: 1=direct, 2=exp(-cumulative
hazard)</p>
</td></tr>
<tr valign="top"><td><code>ctype</code></td>
<td>
<p>cumulative hazard computation: 1=Breslow, 2=Efron</p>
</td></tr>
<tr valign="top"><td><code>se.fit</code></td>
<td>
<p>if TRUE, compute standard errors</p>
</td></tr>
<tr valign="top"><td><code>varmat</code></td>
<td>
<p>the variance matrix of the coefficients
</p>
</td></tr>
<tr valign="top"><td><code>cluster</code></td>
<td>
<p>vector to control robust variance</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>the response variable used in the Cox model.  (Missing values
removed of course.)
</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p>covariate matrix used in the Cox model
</p>
</td></tr>
<tr valign="top"><td><code>wt</code></td>
<td>
<p>weight vector for the Cox model. If the model was unweighted
use a vector of 1s.
</p>
</td></tr>
<tr valign="top"><td><code>risk</code></td>
<td>
<p>the risk score exp(X beta + offset) from the fitted Cox model.</p>
</td></tr>
<tr valign="top"><td><code>position</code></td>
<td>
<p>optional argument controlling what is counted as
'censored'.  Due to time dependent covariates, for instance, a
subject might have start, stop times of (1,5)(5,30)(30,100).  Times
5 and 30 are not 'real' censorings.  Position is 1 for a real start,
2 for an actual end, 3 for both, 0 for neither.</p>
</td></tr>
<tr valign="top"><td><code>strata</code></td>
<td>
<p>strata variable used in the Cox model. This will be a
factor.</p>
</td></tr>
<tr valign="top"><td><code>oldid</code></td>
<td>
<p>identifier for subjects with multiple rows in the
original data.</p>
</td></tr>
<tr valign="top"><td><code>y2, x2, risk2, strata2</code></td>
<td>
<p>variables for the hypothetical subjects,
for which prediction is desired</p>
</td></tr>
<tr valign="top"><td><code>id2</code></td>
<td>
<p>optional; if present and not NULL this should be
a vector of identifiers of length <code>nrow(x2)</code>.
A non-null value signifies that <code>x2</code> contains time dependent
covariates, in which case this identifies which rows of <code>x2</code> go
with each subject.
</p>
</td></tr>
<tr valign="top"><td><code>unlist</code></td>
<td>
<p>if <code>FALSE</code> the result will be a list with one
element for each strata.  Otherwise the strata are &ldquo;unpacked&rdquo; into
the form found in a <code>survfit</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing nearly all the components of a <code>survfit</code>
object.  All that is missing is to add the confidence intervals, the
type of the original model's response (as in a coxph object), and the
class.
</p>


<h3>Note</h3>

<p>The source code for for both this function and
<code>survfit.coxph</code> is written using noweb.  For complete
documentation see the <code>inst/sourcecode.pdf</code> file.
</p>


<h3>Author(s)</h3>

<p>Terry Therneau</p>


<h3>See Also</h3>

<p><code><a href="survfit.coxph.html">survfit.coxph</a></code>
</p>

<hr /><div style="text-align: center;">[Package <em>survival</em> version 3.1-8 <a href="00Index.html">Index</a>]</div>
</body></html>
